<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>聊聊IPv4 | 海海杂说</title><link rel=icon type=image/x-icon href=/favicon/favicon-32x32.png><meta name=copyright content="© Copyright 2025. All rights reserved."><meta name=keywords content="IPv4,子网掩码,广播地址,点分十进制"><meta name=description content="在IPv4网络中，正常情况下，只有在同一个网段的计算机才能直接进行通信，若不在同一个网段内，则需要使用其它的技术才能进行通信。通常在说一个IP地址的时候，通常包含了一个隐藏条件：子网掩码。通过子网掩码和IP地址，一起来确定两个IP是否能直接通信。"><meta name=robots content="index,follow"><link rel=stylesheet href=/css/main.min.ded89dd886a36b12c82783a3397d0c85754be45d90ed2320b32fe86bfec89578.css integrity="sha256-3tid2IajaxLIJ4OjOX0MhXVL5F2Q7SMgsy/oa/7IlXg=" crossorigin=anonymous><link rel=stylesheet href=/css/github-markdown.min.ee481479a5f04c7d701db0c6200f10242416b3f4d2a3c073fdc6a09e145dccb8.css integrity="sha256-7kgUeaXwTH1wHbDGIA8QJCQWs/TSo8Bz/cagnhRdzLg=" crossorigin=anonymous><link rel=stylesheet href=/css/iconfont.min.daa5136180ec22c6e9c0b91c926f85d1272434432a6bbd6cb3a571743fdfeb08.css integrity="sha256-2qUTYYDsIsbpwLkckm+F0SckNEMqa71ss6VxdD/f6wg=" crossorigin=anonymous><script src=/js/dayjs.min.js></script><script src=/js/relativeTime.js></script><script src=/js/zh-cn.js></script><script src=/js/main.f131ccf6104a927521a409081c405198f6e1a22c1adeff2e4f0c4e55ad2e2f65.js integrity="sha256-8THM9hBKknUhpAkIHEBRmPbhoiwa3v8uTwxOVa0uL2U=" crossorigin=anonymous></script><meta name=file content="posts/0003 聊聊IPv4/index.md"></head><body><header><div class=site-header><div class=site-title><img src=/favicon/logo.png class=site-title-logo>
<span class=site-title-text>海海杂说</span></div><div></div><div class=site-menus><nav><ul><li><a href=/><i class="iconfont icon-home"></i>
首页</a></li><li><a aria-current=true class=ancestor href=/posts/><i class="iconfont icon-medium"></i>
博客</a></li><li><a href=/products/><i class="iconfont icon-chanpin"></i>
产品</a></li><li><a href=/moments/><i class="iconfont icon-shejiaotubiao-02"></i>
动态</a></li><li><a href=/about/><i class="iconfont icon-guanyuwomen"></i>
关于</a></li></ul></nav></div></div></header><main><div class=details><div class=details-title>聊聊IPv4</div><hr class=divider><div class=created>发表于：2025-06-15 23:03:37</div><div class="content markdown-body"><blockquote><p>前不久在抖音上刷到讲为什么局域网电脑IP能互通的问题，非常简单的用锁的概念来描述了同一网段能互通的问题。但视频中有很多内容和实际有点出入，想在这里简单的从计算机网络的角度来聊一聊这个问题。
原本想从网卡开始聊起，但写着写着，觉着这个内容太多了，又转到单纯的IPv4中来。</p></blockquote><p>在IPv4网络中，正常情况下，只有在同一个网段的计算机才能直接进行通信，若不在同一个网段内，则需要使用其它的技术才能进行通信。</p><p>通常在说一个IP地址的时候，通常包含了一个隐藏条件：子网掩码。通过子网掩码和IP地址，一起来确定两个IP是否能直接通信。</p><h1 id=ipv4地址结构与表示>IPv4地址结构与表示</h1><h2 id=地址格式>地址格式</h2><p>IP地址的长度为4字节，用<strong>点分十进制</strong>进行表示，如：192.168.0.1。所以一般在数据库中存储IP地址的时候，我会使用一个<code>uint</code>的数据类型来进行存储。</p><p>IP地址由两部分组成：网络部分和主机部分。网络部分用于标示所属的网络，只有相同的网络才能直接通信。主机部分标示同一个网络内的具体设备。</p><h2 id=子网掩码>子网掩码</h2><p>前面说IP地址是由4字节组成，其中又分成了网络和主机两个部分，而子网掩码就是用来区分出网络和主机部分。</p><p>子网掩码从左开始，用连续的二进制<code>1</code>来标识网络位，用连续的二进制<code>0</code>来标识主机位。子网掩码的长度也是4字节，如：255.255.255.0，表示网络位的长度是24位(3字节)，主机位长度是8位(1字节)。</p><p>同时，很多时候也使用<code>CIDR</code>的方式来简化子网的描述。如：192.168.0.1/24，表示子长网中网络的长度是24位(3字节)。</p><h1 id=网络计算>网络计算</h1><p>如果只给出一个IP地址，是没有办法确定两个IP是不是在同一个网络中，所以还必须给出子网掩码。例如在Windows的网络设置中，就必须填写IP地址和子网掩码。</p><p><img src=https://raw.githubusercontent.com/zsea/pdf-reference/master/imgs/2025-6-19/1750335055970.png alt=Windows中的IP设置></p><p>给定了一个IP地址和子网掩码，就能够计算出<strong>网络地址</strong>。如：192.168.0.1/255.255.255.0，把IP地址的每个位与子网掩码的每个位进行<code>&</code>运算（逻辑与运行），这里的运算结果是：192.168.0.0，如果再给出别一个IP地址<code>192.168.0.250/255.255.255.0</code>，计算出来的网络号仍然是192.168.0.0，所以这两个地址能够互相通信。</p><p>如果另一个地址是192.168.0.250/255.255.255.128，则计算出来的网络号是192.168.0.128，那么这两个地址就能够互相通信。</p><p>那如果是下面的两个地址还能互相通信吗？</p><ul><li>192.168.0.1/24</li><li>192.168.0.9/25</li></ul><p><strong>这个问题就大家自己求证吧！！</strong></p><p>同时，网络地址是不能用来表示IP地址的，192.168.0.1/24的可用IP地址是从192.168.0.1开始的。</p><p>在IP中，主机位全是二进制<code>1</code>的地址就是网络地址。</p><h1 id=广播地址>广播地址</h1><p>前面提到过网络地址，在IPv4中，还有另一个特殊的地址：<strong>广播地址</strong>。向广播地址发送数据，能被网络中的每一个主机接收到。</p><p>在IP中，主机位全是二进制<code>1</code>的地址就是广播地址。</p><h2 id=广播地址的实际应用>广播地址的实际应用</h2><h3 id=远程开机>远程开机</h3><p>当你的主板支持远程开机的时候，就可以通过其它机器向网络中的广播地址发送开机魔术包进行开机。开机魔术包会通过广播地址发送到每一台机器的网卡上。</p><h3 id=dhcp>DHCP</h3><p>当电脑刚开机的时候，如果配置了自动获取IP地址，这个时候，就会通过DHCP客户端，以广播形式发送<code>DHCP Discover</code>报文，源IP为<code>0.0.0.0</code>，目标IP为<code>255.255.255.255</code>，携带自身MAC地址。收到<code>Discover</code>后，<strong>DHCP服务器</strong>从地址池选取一个可用IP，通过<code>DHCP Offer</code>报文响应（广播或单播）。</p><blockquote><p>上面的255.255.255.255就是IPv4最大的广播地址。</p></blockquote></div></div></main><footer><p>© Copyright 2025. All rights reserved.</p><p><a href=https://beian.miit.gov.cn/#/Integrated/index target=_blank>蜀ICP备2023031169号-1</a></p></footer></body></html>